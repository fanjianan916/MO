<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>社团首页</title>
    <link rel="stylesheet" href="${pageContext.request.contextPath}/staticfile/css/base.css">
    <link rel="stylesheet" href="${pageContext.request.contextPath}/staticfile/css/index.css">
    <link rel="stylesheet" href="${pageContext.request.contextPath}/staticfile/css/banner.css">
    <link rel="stylesheet" href="${pageContext.request.contextPath}/staticfile/css/floor.css">

</head>
<body>
<div class="navbar" id="navbar">
    <div class="content">
        <a class="logolink" href="${pageContext.request.contextPath}/index.jsp">
            <img class="logo" width="85" src="${pageContext.request.contextPath}/staticfile/img/logo.png">
        </a>
        <a href="javascript:;" class="link feature">产品</a>
        <a href="javascript:;" class="link">智能硬件</a>
        <a href="javascript:;" class="link">客户案例</a>
        <a href="javascript:;" class="link">服务</a>
        <a href="javascript:;" class="link">DING峰会</a>
        <a href="javascript:;" class="link">开放平台</a>
        <a href="javascript:;" class="link">下载钉钉</a>
        <a href="${pageContext.request.contextPath}/register.jsp" class="reg">社团注册</a>
        <a href="${pageContext.request.contextPath}/login.jsp" class="login">社团登录</a>
    </div>
</div>

<div id="bannerFir" class="banner">
    <div class="bannerInner">
    
    </div>
    <ul class="bannerTip">
    
    </ul>
    <a href="javascript:;" class="bannerLeft"></a>
    <a href="javascript:;" class="bannerRight"></a>
</div>

<div class="floor" id="floor">
    <div class="floor-title" id="floorTitle">
        MO正在为社团解决管理协同问题
    </div>
    
    <div class="floor-center" id="floorCenter">
        <div class="floor-center-top">
            <p class="floor-title-left">社团问题</p>
            <p class="floor-title-right">解决方案</p>
        </div>
        <div class="floor-tab">
            <ul class="floor-tab-list">
                <li>
                    <div class="tab-list-txt">
                        <span class="special-txt">【办公软件收费昂贵】</span>
                        "中小企业经费紧张，预算有限"
                    </div>
                    <div class="tab-list-content">
                        <div class="tab-list-content-title">客户资料统一管理</div>
                        <div class="tab-list-detail">
                            【江苏云学堂】使用钉钉外部联系人管理客户，跟进记录一目了然，客户资料永久不丢失
                        </div>
                        <div class="tab-list-img-wrap">
                            <img src="${pageContext.request.contextPath}/staticfile/img/floor/detail.png">
                        </div>
                    </div>
                </li>
                
                <li>
                    <div class="tab-list-txt">
                        <span class="special-txt">【办公软件收费昂贵】</span>
                        "中小企业经费紧张，预算有限"
                    </div>
                </li>
                
                <li>
                    <div class="tab-list-txt">
                        <span class="special-txt">【办公软件收费昂贵】</span>
                        "中小企业经费紧张，预算有限"
                    </div>
                </li>
                
                <li>
                    <div class="tab-list-txt">
                        <span class="special-txt">【办公软件收费昂贵】</span>
                        "中小企业经费紧张，预算有限"
                    </div>
                </li>
            </ul>
            <div class="floor-tab-change"><a href="javascript:;"><span></span>看看其他问题</a></div>
        </div>
    </div>

</div>

<div class="footer">
    <div class="footer-content">
        <div class="list">
            <div class="title">快速通道</div>
            
            <a class="link" href="">钉钉网页版</a>
            
            <a class="link" href="" target="_blank">钉钉产品</a>
            
            <a class="link" href="" target="_blank">DING峰会</a>
            
            <a class="link" href="" target="_blank">开放平台</a>
        
        </div>
        <div class="list">
            <div class="title">产品资料</div>
            
            <a class="link" href="" target="_blank">产品介绍</a>
            
            <a class="link" href="" target="_blank">基础使用手册</a>
            
            <a class="link" href="" target="_blank">管理员手册</a>
            
            <a class="link" href="" target="_blank">官方微应用使用指南</a>
        
        </div>
        <div class="list">
            <div class="title">服务规则</div>
            
            <a class="link" href="">服务条款</a>
            
            <a class="link" href="">钉钉公约</a>
            
            <a class="link" href="">安全技术</a>
        
        </div>
        <div class="list">
            <div class="title">语言&amp;下载钉钉</div>
            
            <a class="link" href="">简体中文</a>
            
            <a class="link" href="">English</a>
            
            <a class="link" href="" target="_self">下载钉钉客户端</a>
            
            <a class="link" href="" target="_self">企业注册钉钉</a>
        
        </div>
        <div class="list" style="width:180px; float: right;text-align: right;">
            <div class="lg">0571-88157808</div>
            <div class="sm">周一至周日 08:00-20:00</div>
            <a class="btn sm" href="">免费上门服务</a>
        </div>
        <div class="bottom">
            <div class="friend" style="position: relative;top:50px;">
                
                <a href="" target="_blank"> 阿里巴巴集团 </a> |
                
                <a href=""> 淘宝网 </a> |
                
                <a href=""> 天猫 </a> |
                
                <a href=""> 聚划算 </a> |
                
                <a href="" target="_blank"> 全球速卖通 </a> |
                
                <a href="" target="_blank"> 阿里巴巴国际交易市场 </a> |
                
                <a href="" target="_blank"> 1688 </a> |
                
                <a href="" target="_blank"> 阿里妈妈 </a> |
                
                <a href="" target="_blank"> 飞猪 </a> |
                
                <a href="" target="_blank"> 阿里云计算 </a> |
                
                <a href="" target="_blank"> YunOS </a> |
                
                <a href="" target="_blank"> 支付宝 </a> |
                
                <a href="" target="_blank"> 支付宝商家平台 </a> |
                
                <a href="" target="_blank"> 阿里星球 </a> |
                
                <a href="" target="_blank"> UC </a> |
                
                <a href="" target="_blank"> UC头条 </a> |
                
                <a href="" target="_blank"> 阿里聚安全 </a> |
                
                <a href="" target="_blank"> 友盟 </a>
                <br>
            </div>
        
        </div>
    </div>
</div>

<script src="${pageContext.request.contextPath}/staticfile/js/jquery-1.11.3.js"></script>
<script>
    $(function () {
        var url = "${pageContext.request.contextPath}/staticfile/json/banner.txt?" + Math.random();
        window.banner = function (url) {
        
            var $banner = $("#bannerFir");
            var $bannerInner = $banner.children(".bannerInner"),
                    $bannerTip = $banner.children(".bannerTip");
            var $bannerLeft = $banner.children(".bannerLeft"),
                    $bannerRight = $banner.children(".bannerRight");
        
            var $divList = null,
                    $imgList = null,
                    $oLis = null;
        
        
            //1. ajax读取数据和绑定数据
            var jsonData = null;
            $.ajax({
                url: url,
                type: "get",
                dataType: "json",
                async: false,//当前请求是同步的
                success: function (data) {
                    jsonData = data;
                }
            });
        
            //2. 实现数据的绑定
            bindData();
        
            function bindData() {
                var str = "", str2 = "";
                $.each(jsonData, function (index, item) {
                    str += "<div><img src='' trueImg='" + item["img"] + "'></div>";
                    index === 0 ? str2 += "<li class='bg'></li>" : str2 += "<li></li>";
                });
            
                $bannerInner.html(str);
                $bannerTip.html(str2);
            
                $divList = $bannerInner.children("div");
                $imgList = $bannerInner.find("img");
                $oLis = $bannerTip.children("li");
            }
        
            //3 实现图片的延迟加载
            window.setTimeout(lazyImg, 500);
        
            function lazyImg() {
                $imgList.each(function (index, item) {
                    var oImg = new Image;
                    oImg.src = $(item).attr("trueImg");
                    oImg.onload = function () {
                        $(item).attr("src", this.src).css("display", "block");
                        oImg = null;
                    };
                });
                $divList.eq(0).css("zIndex", 1).animate({
                    opacity: 1
                }, 300);
            }
        
            function changeBanner() {
                var $curDiv = $divList.eq(step);
                $curDiv.css("zIndex", 1).siblings().css("zIndex", 0);
                $curDiv.animate({
                    opacity: 1
                }, 300, function () {
                    $(this).siblings().css("opacity", 0);
                });
                var $curLi = $oLis.eq(step);
                $curLi.addClass("bg").siblings().removeClass("bg");
            }
        
            //4. 实现自动轮播
            var interval = 3000, step = 0, autoTimer = null;
            autoTimer = window.setInterval(atuoMove, interval);
        
            function atuoMove() {
                if (step === jsonData.length - 1) {
                    step = -1;
                }
                step++;
                changeBanner();
            }
        
            //5 控制左右按钮的显示隐藏和自动轮播的开始
            $banner.on("mouseover", function () {
                window.clearInterval(autoTimer);
                $($bannerLeft).css("display", "block");
                $($bannerRight).css("display", "block");
            }).on("mouseout", function () {
                autoTimer = window.setInterval(atuoMove, interval);
                $($bannerLeft).css("display", "none");
                $($bannerRight).css("display", "none");
            });
        
            //6. 实现焦点切换
            $oLis.on("click", function () {
                step = $(this).index();
                changeBanner();
            });
        
            //7. 实现左右切换
            $bannerRight.on("click", atuoMove);
            $bannerLeft.on("click", function () {
                if (step === 0) {
                    step = jsonData.length;
                }
                step--;
                changeBanner();
            });
        };
    
        window.banner(url);
    
    });
</script>
</body>
</html>
